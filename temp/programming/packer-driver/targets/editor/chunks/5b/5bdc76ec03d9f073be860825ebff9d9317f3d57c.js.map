{"version":3,"sources":["file:///D:/game/FrameworkCocos/assets/vd-games/preschool-exam/script/screens/comparison/level1_comp.ts"],"names":["_decorator","Component","Node","Sprite","Color","log","Prefab","tween","v3","Label","VDScreenManager","ScaleFactor","scaleTo","TimeFactor","level_progress_bar","LocalDataManager","handleFirework","scaleAndHide","ccclass","property","level1_comp","type","progressLevelBar","canPlay","levelNumber","onClickInstruction","levelBarUI","handleProgress","answer","BIG_BY_2","SMALL_BY_0_5","MEDIUM","toDefault","bind","onClickBtnNext","event","data","level2_screen","instance","assetBundle","get","String","pushScreen","screen","onClickBack","popScreen","start","lev","level","getComponent","string","Number","checkDone","getObject","check","comparison","startPlay","nextBtn","active","i","items","length","on","EventType","TOUCH_END","checkAnswer","processCorrect","processWrong","ob","setObject","fireWorkL","fireWorkR","smile","sprite","color","cry","to","scale","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Sprite, Color, log, Prefab, tween, v3, Label, Vec3 } from 'cc';\r\nimport VDBaseScreen from '../../../../../vd-framework/ui/VDBaseScreen';\r\nimport VDScreenManager from '../../../../../vd-framework/ui/VDScreenManager';\r\nimport { ScaleFactor, scaleTo, TimeFactor } from '../../transiton/Transformation';\r\n\r\nimport { level_progress_bar } from '../../transiton/level_progress_bar';\r\nimport LocalDataManager from '../../common/LocalDataManager';\r\nimport { handleFirework } from '../../common/handleFirework';\r\nimport { scaleAndHide } from '../../transiton/Transformation';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('level1_comp')\r\nexport class level1_comp extends Component {\r\n    @property({type: Node})\r\n    answer: Node = null;\r\n    @property({type: Node})\r\n    pointer: Node = null;\r\n    @property({type: Node})\r\n    smile: Node = null;\r\n    @property({type: Node})\r\n    cry: Node = null;\r\n    @property({type: Node})\r\n    nextBtn: Node = null;\r\n    @property({type: handleFirework})\r\n    fireWorkL: handleFirework = null;\r\n    @property({type: handleFirework})\r\n    fireWorkR: handleFirework = null;\r\n\r\n    @property(level_progress_bar)\r\n    levelBarUI: level_progress_bar = null;\r\n    // mac dinh item[0] chua dap an\r\n    @property({type: Node})\r\n    items: Node[] = [];\r\n\r\n    progressLevelBar?: level_progress_bar;\r\n    private canPlay = true;\r\n    @property(Node)\r\n    level: Node = null;\r\n\r\n    private levelNumber = 1;\r\n\r\n    onClickInstruction() {\r\n        if(this.levelBarUI){\r\n            this.levelBarUI.handleProgress();\r\n        }\r\n        // this.pointer.active = true;\r\n        // let p = this.answer.getWorldPosition();\r\n        // this.pointer.setWorldPosition(p.x, p.y, 0);\r\n        // let sprite =  this.answer.getComponent(Sprite);\r\n        // sprite.color = new Color(67, 14, 180); \r\n        scaleTo(this.answer, ScaleFactor.BIG_BY_2, ScaleFactor.SMALL_BY_0_5, TimeFactor.MEDIUM, this.toDefault.bind(this));\r\n    }\r\n\r\n    onClickBtnNext(event: TouchEvent, data: any) {\r\n        log(\"check number: \", data)\r\n        \r\n        let level2_screen = VDScreenManager.instance.assetBundle.get('res/prefabs/screen/comparison/level'+String(data), Prefab)!;\r\n        VDScreenManager.instance.pushScreen(level2_screen, (screen: VDBaseScreen) => { }, true);\r\n        // xoa man choi hien tai\r\n        // VDScreenManager.instance.popScreen(true);\r\n        // cong them kinh nghiem\r\n        \r\n    }\r\n\r\n    onClickBack() {\r\n        //cach 1\r\n        // log(`onClickBtnPrevious`);\r\n        VDScreenManager.instance.popScreen(true);\r\n    }\r\n\r\n    toDefault() {\r\n        // let sprite =  this.answer.getComponent(Sprite);\r\n        // sprite.color = new Color(204, 204, 204);\r\n        // this.pointer.active = false;\r\n    }\r\n    start() {\r\n        let lev = this.level.getComponent(Label).string;\r\n        this.levelNumber = Number(lev);\r\n        let checkDone = LocalDataManager.getObject(\"check\", {});\r\n        let check = checkDone.comparison[this.levelNumber];\r\n        this.canPlay = !check;\r\n        log(\"check\", check);\r\n        \r\n        this.startPlay();\r\n    }\r\n\r\n    startPlay() { \r\n        if(!this.canPlay){\r\n            this.nextBtn.active = true;\r\n        }else {\r\n            for(let i=0; i<this.items.length; i++) {\r\n                this.items[i].on(Node.EventType.TOUCH_END, this.checkAnswer.bind(this, i));\r\n            }\r\n        }\r\n        \r\n    }\r\n    checkAnswer(i: number){\r\n        if(this.canPlay){\r\n            if(i==0) {\r\n                this.processCorrect();\r\n            }else {\r\n                this.processWrong();\r\n            }\r\n        }\r\n        \r\n        \r\n    }\r\n    processCorrect(){\r\n        let ob = LocalDataManager.getObject(\"check\", {});\r\n        ob.comparison[this.levelNumber] = true;\r\n        LocalDataManager.setObject(\"check\", ob);\r\n        this.canPlay = false;\r\n        if(this.levelBarUI){\r\n            this.levelBarUI.handleProgress();\r\n        }\r\n        //hieu ung thang\r\n        this.fireWorkL.startPlay();\r\n        this.fireWorkR.startPlay();\r\n        this.smile.active = true;\r\n        scaleAndHide(this.smile, v3(0.6, 0.6, 0), 3);\r\n        let sprite =  this.answer.getComponent(Sprite);\r\n        sprite.color = new Color(67, 14, 180);\r\n        this.nextBtn.active = true;\r\n    }\r\n    processWrong(){\r\n        this.cry.active = true;\r\n        tween(this.cry)\r\n        .to(1, {scale: v3(0.08, 0.08, 0)})\r\n        .to(0.2, {scale: v3(0, 0, 0)})\r\n        .start();\r\n    }\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n}\r\n\r\n\r\n"]}