{"version":3,"sources":["file:///C:/Users/Admin/Downloads/Telegram%20Desktop/FrameworkCocos/FrameworkCocos/assets/vd-framework/audio/VDAudioManager.ts"],"names":["VDAudioManager","sys","VDAudioNativeManager","VDAudioWebManager","instance","_instance","constructor","_audioManager","_isWebAudio","isBrowser","isMutingMusic","value","isMutingEffect","musicVolume","effectVolume","init","audio","playBGM","name","fade","pauseBGM","resumeBGM","playClip","loop","callback","stopClip","playEffect","stopEffect","sfxId","stopEffectByName","resumeEffect","pauseEffect","stopAllEffects","pauseAllEffects","resumeAllEffects","destroy","ENABLE_MUSIC","ENABLE_SFX"],"mappings":"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","sourcesContent":["\nimport { _decorator, sys } from 'cc';\nimport { VDAudio } from './VDAudio';\nimport { VDAudioNativeManager } from './VDAudioNativeManager';\nimport { VDAudioWebManager } from './VDAudioWebManager';\n\nexport class VDAudioManager {\n\n    public static readonly ENABLE_MUSIC = 'enableBackgroundMusic';\n    public static readonly ENABLE_SFX = 'enableSound';\n\n\n    protected static _instance: VDAudioManager;\n    static get instance() {\n        if (VDAudioManager._instance) {\n            return VDAudioManager._instance;\n        }\n        VDAudioManager._instance = new VDAudioManager();\n        return VDAudioManager._instance;\n    }\n\n    constructor() {\n        if (this._isWebAudio()) {\n            this._audioManager = new VDAudioWebManager()\n        }\n        else {\n            this._audioManager = new VDAudioNativeManager();\n        }\n    }\n\n    private _isWebAudio() {\n        return sys.isBrowser;\n    }\n\n    private _audioManager: VDAudio;\n\n    get isMutingMusic() {\n        return this._audioManager.isMutingMusic;\n    }\n    set isMutingMusic(value) {\n        this._audioManager.isMutingMusic = value;\n    }\n\n    get isMutingEffect() {\n        return this._audioManager.isMutingEffect;\n    }\n    set isMutingEffect(value) {\n        this._audioManager.isMutingEffect = value;\n    }\n\n    get musicVolume() {\n        return this._audioManager.musicVolume;\n    }\n    set musicVolume(value) {\n        this._audioManager.musicVolume = value;\n    }\n\n    get effectVolume() {\n        return this._audioManager.effectVolume;\n    }\n    set effectVolume(value) {\n        this._audioManager.effectVolume = value;\n\n    }\n\n    init(audio: any) {\n        this._audioManager.init(audio);\n    }\n\n    playBGM(name: string, fade: boolean = false) {\n        this._audioManager.playBGM(name, fade);\n    }\n\n    pauseBGM(fade = true) {\n        this._audioManager.pauseBGM(fade);\n    }\n\n    resumeBGM(fade = true) {\n        this._audioManager.resumeBGM(fade);\n\n    }\n\n    playClip(name: string, loop: boolean = false, resumeBGM: boolean = true, callback: VoidFunction | null = null) {\n        this._audioManager.playClip(name, loop, resumeBGM, callback);\n\n    }\n\n    stopClip(resumeBGM: boolean = true, callback: VoidFunction | null = null) {\n        this._audioManager.stopClip(resumeBGM, callback);\n    }\n\n    playEffect(name: string, loop: boolean = false, callback: VoidFunction | null = null): string | null {\n        return this._audioManager.playEffect(name, loop, callback);\n    }\n\n    stopEffect(sfxId: string, fade: boolean = false): boolean {\n        return this._audioManager.stopEffect(sfxId, fade);\n    }\n\n    stopEffectByName(name: string, fade: boolean = false): boolean {\n        return this._audioManager.stopEffectByName(name, fade);\n    }\n\n    resumeEffect(sfxId: string, fade: boolean = false) {\n        this._audioManager.resumeEffect(sfxId, fade);\n    }\n\n    pauseEffect(sfxId: string, fade: boolean = false) {\n        this._audioManager.pauseEffect(sfxId, fade);\n    }\n\n    stopAllEffects(fade: boolean = false) {\n        this._audioManager.stopAllEffects(fade);\n    }\n\n    pauseAllEffects(fade: boolean = false) {\n        this._audioManager.pauseAllEffects(fade);\n    }\n\n    resumeAllEffects(fade: boolean = false) {\n        this._audioManager.resumeAllEffects(fade);\n    }\n\n    destroy() {\n        this._audioManager && this._audioManager.destroy();\n        VDAudioManager._instance = null;\n    }\n}\n"]}