{"version":3,"sources":["file:///D:/game/FrameworkCocos/assets/vd-games/preschool-exam/script/draw/graphic_filling.ts"],"names":["_decorator","Component","Node","Graphics","Vec2","v3","Color","ccclass","property","temp_vec2","graphic_filling","area","graphics","start","initGraphics","node","on","EventType","TOUCH_START","onTouchStart","bind","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","parentG","getParent","getComponent","lineWidth","strokeColor","BLACK","event","p","getUILocation","out","inverseTransformPoint","x","y","g","moveTo","stroke","emit","newP","lineTo","pEnd","clear"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Vec3, Graphics, UITransform, EventTouch, Vec2, math, v3, Color } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\nconst temp_vec2 = new Vec2();\r\n\r\n@ccclass('graphic_filling')\r\nexport class graphic_filling extends Component {\r\n    area: Node = null;\r\n    graphics: Graphics = null!;\r\n\r\n    start() {\r\n        this.initGraphics();\r\n        this.node.on(Node.EventType.TOUCH_START, this.onTouchStart.bind(this));\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.onTouchMove.bind(this));\r\n        this.node.on(Node.EventType.TOUCH_END, this.onTouchEnd.bind(this));\r\n    }\r\n    initGraphics(){\r\n        let parentG = this.node.getParent();\r\n        this.area = parentG?parentG:null;\r\n        this.graphics = this.node.getComponent(Graphics);\r\n        this.graphics.lineWidth=10;\r\n        this.graphics.strokeColor = Color.BLACK;\r\n    }\r\n\r\n    onTouchStart(event: EventTouch) {\r\n        let p = event.getUILocation();\r\n        let out = v3();\r\n        this.area.inverseTransformPoint(out, v3(p.x, p.y, 0));\r\n        let g = this.graphics;\r\n        g.moveTo(out.x, out.y);\r\n        g.stroke();\r\n        this.node.emit('draw-start', p);\r\n    }\r\n\r\n    onTouchMove(event: EventTouch) {\r\n        let newP = event.getUILocation();\r\n        let out = v3();\r\n        this.area.inverseTransformPoint(out, v3(newP.x, newP.y, 0));\r\n        let g = this.graphics;\r\n        g.lineTo(out.x, out.y);\r\n        g.stroke();\r\n        this.node.emit('draw-move', newP);\r\n    }\r\n    onTouchEnd(event: EventTouch){\r\n        let pEnd = event.getUILocation();\r\n        this.node.emit('draw-end', pEnd);\r\n    }\r\n    clear(){\r\n        this.graphics.clear();\r\n    }\r\n}\r\n\r\n\r\n"]}