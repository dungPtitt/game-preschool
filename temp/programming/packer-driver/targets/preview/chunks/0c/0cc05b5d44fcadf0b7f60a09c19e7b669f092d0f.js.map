{"version":3,"sources":["file:///D:/game/FrameworkCocos/assets/vd-games/preschool-exam/script/screens/science/level4_science.ts"],"names":["_decorator","Component","Node","Prefab","instantiate","log","Graphics","v3","level_progress_bar","ccclass","property","level4_science","graphics","draw","listGraphics","start","initGraphic","initDrawInstruction","gPrefab","on","onTouchEnd","bind","area","addChild","getComponent","push","p1","listDots","getWorldPosition","p2","out","inverseTransformPoint","x","y","g","moveTo","lineTo","stroke","onClear","pop","clear","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab, instantiate, log, Gradient, Graphics, EventTouch, v3, Color } from 'cc';\r\nimport { level_progress_bar } from '../../transiton/level_progress_bar';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('level4_science')\r\nexport class level4_science extends Component {\r\n    @property(level_progress_bar)\r\n    levelBarUI: level_progress_bar = null;\r\n    @property(Node)\r\n    level: Node = null;\r\n    @property(Prefab)\r\n    gPrefab: Prefab = null;\r\n    @property(Node)\r\n    area: Node = null;\r\n    @property(Node)\r\n    listDots: Node[] = [];\r\n\r\n    private graphics = null;\r\n    private draw: Node = null;\r\n    private listGraphics: Node[] = [];\r\n    start() {\r\n        this.initGraphic();\r\n        this.initDrawInstruction();\r\n        // this.draw.on(Node.EventType.TOUCH_MOVE, this.onTouchMove.bind(this));\r\n        // this.draw.on(Node.EventType.TOUCH_END, this.onTouchEnd.bind(this));\r\n    }\r\n    initGraphic(){\r\n        this.draw = instantiate(this.gPrefab);\r\n        this.draw.on('draw-end', this.onTouchEnd.bind(this));\r\n        this.area.addChild(this.draw);\r\n        this.graphics = this.draw.getComponent(Graphics);\r\n        this.listGraphics.push(this.draw);\r\n    }\r\n    initDrawInstruction(){\r\n        let p1 = this.listDots[0].getWorldPosition();\r\n        let p2 = this.listDots[8].getWorldPosition();\r\n        let out = v3();\r\n        this.area.inverseTransformPoint(out, v3(p1.x, p1.y, 0));\r\n        let g = this.graphics;\r\n        g.moveTo(out.x, out.y);\r\n        this.area.inverseTransformPoint(out, v3(p2.x, p2.y, 0));\r\n        g.lineTo(out.x, out.y);\r\n        g.stroke();\r\n    }\r\n    onTouchEnd(){\r\n        log(\"check touch end: \");\r\n        this.initGraphic();\r\n    }\r\n    onClear(){\r\n        let g = this.listGraphics.pop();\r\n        g.getComponent(Graphics).clear();\r\n        log(\"check list: \", this.listGraphics);\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n}\r\n\r\n\r\n"]}