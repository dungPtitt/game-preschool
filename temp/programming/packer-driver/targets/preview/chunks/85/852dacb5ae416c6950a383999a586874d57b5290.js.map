{"version":3,"sources":["file:///D:/game/FrameworkCocos/assets/vd-games/pvp-domino/script/dm_Scene.ts"],"names":["_decorator","Component","log","assetManager","Prefab","VDAsyncTaskMgr","VDAudioManager","VDScreenManager","dm_Config","ccclass","property","dm_Scene","onLoad","bundle","getBundle","GAME_NAME","node","addComponent","instance","assetBundle","setupCommon","load","error","prefab","initWithRootScreen","screen","name","onDestroy","destroy","stop"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,G,OAAAA,G;AAAKC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,M,OAAAA,M;;AAC5CC,MAAAA,c;;AACEC,MAAAA,c,iBAAAA,c;;AACFC,MAAAA,e;;AACEC,MAAAA,S,iBAAAA,S;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;0BAGjBW,Q,WADZF,OAAO,CAAC,UAAD,C,gBAAR,MACaE,QADb,SAC8BV,SAD9B,CACwC;AACpCW,QAAAA,MAAM,GAAG;AACLV,UAAAA,GAAG,CAAC,yBAAD,CAAH;AACA,cAAIW,MAAM,GAAGV,YAAY,CAACW,SAAb,CAAuB,YAAY;AAAA;AAAA,sCAAUC,SAA7C,CAAb;;AACA,cAAIF,MAAJ,EAAY;AACR,iBAAKG,IAAL,CAAUC,YAAV;AAAA;AAAA;AAEA;AAAA;AAAA,oDAAgBC,QAAhB,CAAyBC,WAAzB,GAAuCN,MAAvC;AACA;AAAA;AAAA,oDAAgBK,QAAhB,CAAyBE,WAAzB;AAEAP,YAAAA,MAAM,CAACQ,IAAP,CAAY,mCAAZ,EAAiDjB,MAAjD,EAAyD,CAACkB,KAAD,EAAQC,MAAR,KAAmB;AACxE,kBAAID,KAAJ,EAAW;AACPpB,gBAAAA,GAAG,mBAAiBoB,KAAjB,CAAH;AACH,eAFD,MAGK;AACDpB,gBAAAA,GAAG,CAAC,qBAAD,CAAH,CADC,CAED;;AACA;AAAA;AAAA,wDAAgBgB,QAAhB,CAAyBM,kBAAzB,CAA4CD,MAA5C,EAAqDE,MAAD,IAAY;AAC5DvB,kBAAAA,GAAG,CAAC,wBAAwBuB,MAAM,CAACC,IAA/B,GAAsC,WAAvC,CAAH;AACH,iBAFD;AAGH;AACJ,aAXD;AAYH;AACJ;;AAEDC,QAAAA,SAAS,GAAG;AACR;AAAA;AAAA,gDAAeT,QAAf,CAAwBU,OAAxB;AACA;AAAA;AAAA,gDAAeV,QAAf,CAAwBW,IAAxB;AACH;;AA5BmC,O","sourcesContent":["import { _decorator, Component, log, assetManager, Prefab } from 'cc';\nimport VDAsyncTaskMgr from '../../../vd-framework/async-task/VDAsyncTaskMgr';\nimport { VDAudioManager } from '../../../vd-framework/audio/VDAudioManager';\nimport VDScreenManager from '../../../vd-framework/ui/VDScreenManager';\nimport { dm_Config } from './common/dm_Config';\nconst { ccclass, property } = _decorator;\n\n@ccclass('dm_Scene')\nexport class dm_Scene extends Component {\n    onLoad() {\n        log(\"@ dm_Scene: onLoad  !!!\");\n        let bundle = assetManager.getBundle(\"bundle_\" + dm_Config.GAME_NAME);\n        if (bundle) {\n            this.node.addComponent(VDScreenManager);\n\n            VDScreenManager.instance.assetBundle = bundle;\n            VDScreenManager.instance.setupCommon();\n\n            bundle.load(\"res/prefabs/screen/loading_screen\", Prefab, (error, prefab) => {\n                if (error) {\n                    log(`bundle.load: ${error}`);\n                }\n                else {\n                    log(\"load loading sucess\")\n                    // VDScreenManager.instance.initWithRootScreen(prefab);\n                    VDScreenManager.instance.initWithRootScreen(prefab, (screen) => {\n                        log('initWithRootScreen ' + screen.name + ' success!');\n                    });\n                }\n            })\n        }\n    }\n\n    onDestroy() {\n        VDAudioManager.instance.destroy();\n        VDAsyncTaskMgr.instance.stop();\n    }\n\n}\n\n"]}