{"version":3,"sources":["file:///D:/game/FrameworkCocos/assets/vd-games/preschool-exam/script/draw/graphic_filling.ts"],"names":["_decorator","Component","Node","Vec3","Graphics","UITransform","Vec2","math","ccclass","property","temp_vec2","graphic_filling","pos","worldPos","graphics","minX","minY","maxX","maxY","start","node","on","EventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","getComponent","trans","wPos","convertToWorldSpaceAR","anchorX","width","x","anchorY","height","y","lineWidth","onDestroy","off","event","getUILocation","clamp","set","moveTo","lineTo","stroke","clear"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Vec3, Graphics, UITransform, EventTouch, Vec2, math } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\nconst temp_vec2 = new Vec2();\r\n\r\n@ccclass('graphic_filling')\r\nexport class graphic_filling extends Component {\r\n    pos = new Vec3();\r\n    worldPos = new Vec3();\r\n    graphics: Graphics = null!;\r\n\r\n    minX = 0;\r\n    minY = 0;\r\n    maxX = 0;\r\n    maxY = 0;\r\n\r\n    start() {\r\n        this.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n\r\n        this.graphics = this.getComponent(Graphics)!;\r\n        const trans = this.getComponent(UITransform)!;\r\n        const wPos = this.getComponent(UITransform)?.convertToWorldSpaceAR(new Vec3(), this.worldPos)!;\r\n        this.minX = - trans.anchorX * trans.width + wPos.x;\r\n        this.maxX = (1 - trans.anchorX) * trans.width + wPos.x;\r\n        this.minY = - trans.anchorY * trans.height + wPos.y;\r\n        this.maxY = (1 - trans.anchorY) * trans.height + wPos.y;\r\n\r\n        this.graphics.lineWidth = 10;\r\n    }\r\n\r\n    onDestroy(){\r\n        this.node.off(Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.node.off(Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n    }\r\n\r\n    onTouchStart(event: EventTouch) {\r\n        event.getUILocation(temp_vec2);\r\n        let x = math.clamp(temp_vec2.x, this.minX, this.maxX);\r\n        let y = math.clamp(temp_vec2.y, this.minY, this.maxY);\r\n        this.pos.set(x - this.worldPos.x, y - this.worldPos.y, 0);\r\n    }\r\n\r\n    onTouchMove(event: EventTouch) {\r\n        this.graphics.moveTo(this.pos.x, this.pos.y);\r\n        event.getUILocation(temp_vec2);\r\n        let x = math.clamp(temp_vec2.x, this.minX, this.maxX);\r\n        let y = math.clamp(temp_vec2.y, this.minY, this.maxY);\r\n        this.pos.set(x - this.worldPos.x, y - this.worldPos.y, 0);\r\n        this.graphics.lineTo(this.pos.x, this.pos.y);\r\n        this.graphics.stroke();\r\n\r\n    }\r\n\r\n    clear(){\r\n        this.graphics.clear();\r\n    }\r\n}\r\n\r\n\r\n"]}